# Compiler

### Flow of Compile

0. プリプロセッサ: 一種の言語拡張
1. 字句解析: 言語仕様に規定された字句に分割
2. 構文解析: 字句の列からAST(抽象構文木)を生成
3. 意味解析: ASTを基にエラーチェックや型変換
4. 中間コード生成: [そのまま]
5. 最適化: 実行速度またはコードサイズを目安に最適化
6. アセンブリ・コード生成: ターゲットCPU用のアセンブリの出力

> その後、アセンブラとリンカに処理が流れ、実行ファイルが生成される。

### Example

```
## Clang (Flontend) ##
#                    #
#  Sourcecode        #
#     |              #
#    AST             #
#     |              #
######################
      |
  LLVM IR/bitcode
      |
## LLVM (Middle/Backend) ##
#     |                   #
#  Machine IR             #
#     |                   #
###########################
      |
  assembly/machicode
```
